---
import Layout from '../layouts/Layout.astro';
import LanguageSwitcher from '../components/LanguageSwitcher.astro';
import { getLangFromUrl, useTranslations } from '../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<Layout 
  title={t('site.title')}
  description={t('site.description')}
  type="website"
>
  <!-- Language Switcher -->
  <div class="absolute top-4 right-4 z-50">
    <LanguageSwitcher />
  </div>
  
  <main class="min-h-screen bg-gradient-to-br from-blue-600 via-blue-700 to-purple-800 flex items-center justify-center overflow-hidden">
    <div class="text-center text-white px-6 max-w-md mx-auto relative">
      <!-- Background decoration -->
      <div class="absolute inset-0 -z-10">
        <div class="absolute top-10 left-10 w-20 h-20 bg-white/10 rounded-full blur-xl animate-pulse"></div>
        <div class="absolute bottom-10 right-10 w-16 h-16 bg-white/5 rounded-full blur-xl animate-pulse animation-delay-400"></div>
        <div class="absolute top-1/2 left-1/4 w-12 h-12 bg-white/5 rounded-full blur-xl animate-pulse animation-delay-600"></div>
      </div>
      
      <!-- Car Icon -->
      <div class="mb-8">
        <div class="w-24 h-24 mx-auto mb-6 text-8xl animate-car-bounce">
          ðŸš—
        </div>
      </div>
      
      <!-- Title -->
      <h1 class="text-4xl font-bold mb-4 animate-fade-in-up">
        {t('header.title')}
      </h1>
      
      <!-- Subtitle -->
      <p class="text-xl mb-6 text-blue-100 animate-fade-in-up animation-delay-200">
        {t('header.subtitle')}
      </p>
      
      <!-- Main Description -->
      <h2 class="text-2xl font-semibold mb-8 text-blue-50 animate-fade-in-up animation-delay-400">
        {t('header.instant.communication')}
      </h2>
      
      <!-- Loading Animation -->
      <div class="animate-fade-in-up animation-delay-600">
        <div class="flex justify-center space-x-2 mb-4">
          <div class="w-3 h-3 bg-white rounded-full animate-loading-dot"></div>
          <div class="w-3 h-3 bg-white rounded-full animate-loading-dot animation-delay-200"></div>
          <div class="w-3 h-3 bg-white rounded-full animate-loading-dot animation-delay-400"></div>
        </div>
        <p class="text-sm text-blue-200">{t('splash.loading')}</p>
      </div>
      
      <!-- Progress bar -->
      <div class="mt-6 animate-fade-in-up animation-delay-800">
        <div class="w-full bg-white/20 rounded-full h-1 overflow-hidden">
          <div class="h-full bg-white rounded-full animate-progress-bar"></div>
        </div>
      </div>
    </div>
  </main>
</Layout>

<style>
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  @keyframes carBounce {
    0%, 20%, 50%, 80%, 100% {
      transform: translateY(0) scale(1);
    }
    40% {
      transform: translateY(-10px) scale(1.05);
    }
    60% {
      transform: translateY(-5px) scale(1.02);
    }
  }
  
  @keyframes loadingDot {
    0%, 80%, 100% {
      transform: scale(1);
      opacity: 0.7;
    }
    40% {
      transform: scale(1.3);
      opacity: 1;
    }
  }
  
  @keyframes progressBar {
    0% {
      width: 0%;
    }
    100% {
      width: 100%;
    }
  }
  
  .animate-fade-in-up {
    animation: fadeInUp 0.8s ease-out forwards;
    opacity: 0;
  }
  
  .animate-car-bounce {
    animation: carBounce 2s infinite ease-in-out;
  }
  
  .animate-loading-dot {
    animation: loadingDot 1.4s infinite ease-in-out;
  }
  
  .animate-progress-bar {
    animation: progressBar 3s ease-out forwards;
    width: 0%;
  }
  
  .animation-delay-200 {
    animation-delay: 0.2s;
  }
  
  .animation-delay-400 {
    animation-delay: 0.4s;
  }
  
  .animation-delay-600 {
    animation-delay: 0.6s;
  }
  
  .animation-delay-800 {
    animation-delay: 0.8s;
  }
</style>

<script define:vars={{ lang }}>
  document.addEventListener('DOMContentLoaded', function() {
    // 3 saniye sonra ana sayfaya yÃ¶nlendir
    setTimeout(() => {
      const mainPath = lang === 'en' ? '/en/main' : '/main';
      window.location.href = mainPath;
    }, 3000);
  });
</script>
